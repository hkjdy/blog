---
date: 2017/7/8 星期六  18:59:19+0800
layout: post
title: (OS-王道)第2章 进程管理
thread: 164
categories: 操作系统
tags:  进程
---

# 2.1 进程与线程
## 1. 为什么要引入进程？
在多道程序同时运行的背景下，进程之间需要共享系统资源，这样就会导致各程序在执行过程中出现相互制约的关系，程序的执行就会表现出间断性的特征。这些特征都是在程序的执行过程中发生的，是动态的过程，而传统的程序本身是一组指令的集合，是一个静态的概念，无法描述程序在内存中的执行情况，即我们无法从程序的字面上看出它何时执行、何时停顿，也法看出它与其他程序的关系，因此，程序这个静态概念已不能如实反映程序并发执行过程的特征。为了深刻描述程序动态执行过程的性质乃至更好地支持和管理多道程序的并发执行，人们引入进程概念。

## 2. 什么是进程及进程由什么组成？
进程是一个具有独立功能的程序关于某个数据集合的一次运行活动。它可以申请和拥有系统资源，是一个动态的概念，是一活动的实体。它不只是程序的代码本身，还包括当前的活动，通过程序计数器的值和处理寄存器的内容来表示。
一个进程实体由程序段、相关数据段和PCB三部分构成，其中PCB是标志一个进程存在的唯一标识，程序段是进程运行的程序的代码，数据段则存储程序运行过程中相关的一些数据。

## 3. 进程是如何解决问题的？
进程把能够识别程序运行状态的一些变量存入在PCB中，通过这些变量系统能够更好地了解进程的状况，并在适当的时候进行进程的切换，以避免一些资源的浪费。甚至划分为更小的调度单位——线程来提高系统的并发度。

本节的内容主要是介绍什么是进程，围绕着这个问题进行了一些阐述和讨论，这下一节讨论的内容做铺垫，但之前未学过相关课程的读者可能会比较费解，到现在为止对进程这个概念还没形成比较清晰的认识，接下来，我们再用一个我们比较熟悉的概念去类比进程，大家就能彻底理解本节内容到底在讲什么，到底解决什么问题。

我们用"人的生命历程"去类比进程。首先，人的生命历程一定是一个动态的、过程性的概念，要研究人的生命历程，先要介绍经历这个历程的主体是什么，当然是人，也就相当于经历进程的主体是进程映像，人有属于自己的身份，就相当于进程映像里有PCB；人生历程会经历好几种状态：出生的时候、弥留的时候、充满斗志的时候、发愤图强的时候，可能还会有失落的时候，相当于进程会有创建、撤销、就绪、运行、阻塞，这几种状态会发生改变，人会充满斗志而转向发奋图强，发愤图强获得进步之后又会充满斗志预备下一次发愤图强，或者发愤图强后遇到阻碍会进入失落状态，然后在别人的开导之下又会重新充满斗志，类比进程，会由就绪状态转向运行态，运行态转向就绪态，或者运行态转向阻塞态，然后在别的进程帮助下可能会返回就绪态。

如果我们可以用“人生历程”这个过程的概念去类比进程，那么对进程的理解就会更深一层。前面生活化的例子可以帮我们理解进程的实质，但它毕竟有不严谨的地方。一个较好的方式是，在类比了进程和“人生历程”后，再看一遍前面较为严谨的书面阐述和讨论，这样对知识的掌握会更加准确而全面。

这里再给出一些学习计算机科学知识的建议，学习科学知识的时候，很多同学会陷入一个误区，只注重对定理、公式的应用，而忽视对基础概念的理解。这是从小到大为了应付考试而培养出的一个毛病，因为熟练应用公式定理对考试有立竿见影的效果。公式定理的应用固然重要，但基础概念的理解能让我们透彻地理解一门学科，更利于我们产生兴趣，培养创造性思维。

本节的知识架构图如下：

![进程](http://img.hkjdy.cn/process.png)

# 2.2 处理机调度
## 1. 为什么要进行处理机调度
若没有处理机调度，就意味着要等到当前运行的进程执行完毕后，下一个进程才能执行，而实现情况中，进程时常需要等待一些外部设备的输入，而外部设备的速度与处理机相比是非常缓慢的，如果让处理机总是等待外部设备，那么对处理机的资源是极大的浪费。而引进处理机调度后，可以在运行进程等待外部设备时，把处理机调度给其他进程，从而提高处理机的利用率。用一句简单的话说，就是为了合理地处理计算机软硬件资源。

## 2. 调度的算法有哪几种？结合第1章学习的分时操作系统和实现操作系统，思考有没有哪种调度算法比较适合这两种操作系统。
本节介绍的调度算法有先来先服务调度算法，短作业优先调度算法、优先级调度算法、高响应比优先调度算法、时间片轮转调度算法、多级反馈队列调度算法六种。

先来先服务算法和短作业优先算法无法保证及时的接收和处理问题，就无法保证在规定的时间间隔内，响应每个用户的需求。也同样无法达到实时操作系统的及时性需求。优先级调度算法按照任务的优先级进行调度，对于更紧急的任务给予更高的优先级，适合实时操作系统。
高响应比优先调度算法、时间片轮转调度算法、多级反馈队列调度算法都能保证每个任务在一定时间内分配到时间片，并轮流占用CPU，适合分时操作系统。
本节主要介绍了处理机调度的概念。操作系统主要管理处理机、内存、文件、设备几种资源，凡是当对资源的请求大于资源本身的数量的时候，就会涉及到调度。比如在单处理机系统中，处理机只有一个，而请求服务的进程却有多个，所以就有处理机调度的概念出现。而出现了调度的概念之后，又有了一个问题，那就是如何调度、应该满足谁、应该让谁等待，这就是调度算法所回答的问题。而应该满足谁、应该让谁等待，要遵循一定的准则，这就是调度的准则。调度这个概念贯穿于操作系统的始终，读者在接下来的学习中接触到几种对资源的调度问题和相应的调度算法。将他们与处理机调度的内容相对比，将会发现他们有异曲同工之妙。

本节的知识架构图如下：

![调度](http://img.hkjdy.cn/diaodu.png)